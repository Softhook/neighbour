<!DOCTYPE html>
<html>
<head>
    <title>AI Testing - Eat Your Neighbor</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-result { margin: 10px 0; padding: 10px; border: 1px solid #ccc; }
        .pass { background-color: #d4edda; border-color: #c3e6cb; }
        .fail { background-color: #f8d7da; border-color: #f5c6cb; }
        .info { background-color: #d1ecf1; border-color: #bee5eb; }
    </style>
</head>
<body>
    <h1>AI Lookahead Analysis</h1>
    <div id="results"></div>
    
    <script src="p5.js"></script>
    <script>
        // Minimal test environment - load only what we need from sketch.js
        // We'll manually extract and test the AI functions
        
        // Constants from sketch.js
        const AI_DIFFICULTY_EASY = 1;
        const AI_DIFFICULTY_MEDIUM = 2;
        const AI_DIFFICULTY_HARD = 3;
        const AI_DIFFICULTY_EXPERT = 4;
        const AI_DIFFICULTY_MASTER = 5;
        const PLAYER_BLACK = 1;
        const PLAYER_WHITE = 2;
        const WINNING_SCORE = 10;
        
        let testResults = [];
        
        function addResult(test, status, details) {
            testResults.push({test, status, details});
            updateDisplay();
        }
        
        function updateDisplay() {
            const container = document.getElementById('results');
            container.innerHTML = testResults.map(result => 
                `<div class="test-result ${result.status}">
                    <strong>${result.test}</strong>: ${result.status.toUpperCase()}
                    <br>${result.details}
                </div>`
            ).join('');
        }
        
        // Test if lookahead depth is correctly set
        function testLookaheadDepth() {
            // Simulate the depth calculation from getMinimaxMove
            const expertDepth = AI_DIFFICULTY_EXPERT === 5 ? 4 : 3; // Should be 3
            const masterDepth = AI_DIFFICULTY_MASTER === 5 ? 4 : 3; // Should be 4
            
            if (expertDepth === 3) {
                addResult("Expert Depth Test", "pass", "Expert AI uses 3-ply lookahead");
            } else {
                addResult("Expert Depth Test", "fail", `Expected 3-ply, got ${expertDepth}-ply`);
            }
            
            if (masterDepth === 4) {
                addResult("Master Depth Test", "pass", "Master AI uses 4-ply lookahead");
            } else {
                addResult("Master Depth Test", "fail", `Expected 4-ply, got ${masterDepth}-ply`);
            }
        }
        
        // Test if time limits are correctly set
        function testTimeLimits() {
            const expertTime = AI_DIFFICULTY_EXPERT === 5 ? 3000 : 2000; // Should be 2000
            const masterTime = AI_DIFFICULTY_MASTER === 5 ? 3000 : 2000; // Should be 3000
            
            if (expertTime === 2000) {
                addResult("Expert Time Test", "pass", "Expert AI uses 2000ms time limit");
            } else {
                addResult("Expert Time Test", "fail", `Expected 2000ms, got ${expertTime}ms`);
            }
            
            if (masterTime === 3000) {
                addResult("Master Time Test", "pass", "Master AI uses 3000ms time limit");
            } else {
                addResult("Master Time Test", "fail", `Expected 3000ms, got ${masterTime}ms`);
            }
        }
        
        // Test if constants are correctly defined
        function testConstants() {
            if (AI_DIFFICULTY_EXPERT === 4) {
                addResult("Expert Constant Test", "pass", "AI_DIFFICULTY_EXPERT = 4");
            } else {
                addResult("Expert Constant Test", "fail", `Expected 4, got ${AI_DIFFICULTY_EXPERT}`);
            }
            
            if (AI_DIFFICULTY_MASTER === 5) {
                addResult("Master Constant Test", "pass", "AI_DIFFICULTY_MASTER = 5");
            } else {
                addResult("Master Constant Test", "fail", `Expected 5, got ${AI_DIFFICULTY_MASTER}`);
            }
        }
        
        // Run tests
        addResult("AI Analysis", "info", "Testing Expert and Master AI implementation...");
        testConstants();
        testLookaheadDepth();
        testTimeLimits();
        
        // Summary
        const passCount = testResults.filter(r => r.status === 'pass').length;
        const failCount = testResults.filter(r => r.status === 'fail').length;
        const totalTests = passCount + failCount;
        
        addResult("Summary", totalTests === passCount ? "pass" : "fail", 
                 `${passCount}/${totalTests} tests passed`);
    </script>
</body>
</html>
